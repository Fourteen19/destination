{"version":3,"sources":["webpack://corp-platform/./resources/admin/js/pages/clients/list.js"],"names":["$","DataTable","processing","serverSide","ajax","columns","data","name","orderable","searchable","className","targets","fn","dataTable","ext","errMode","alert","document","on","modal_update_action_button_text","modal_add_class_action_button_text","modal_update_title","modal_update_body","modal_update_data_id","this","modal","modal_reset_class_action_button","ajaxSetup","headers","attr","modal_update_processing_message","modal_disable_action_button","type","url","text","dataType","success","modal_update_result_message","message","result","draw","error","complete","modal_close","addClass","modal_remove_class_action_button_text"],"mappings":"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","file":"/admin/js/pages/clients/list.js","sourcesContent":["$(function () {\r\n\r\n    var table = $('#client_table').DataTable({\r\n        processing: true,\r\n        serverSide: true,\r\n        ajax: \"/admin/clients\",\r\n        columns: [\r\n            {data: 'name', name: 'name', orderable: false, searchable: false},\r\n            {data: 'subdomain', name: 'subdomain', orderable: true, searchable: true},\r\n            {data: 'action', name: 'action', orderable: false, searchable: false},\r\n        ],\r\n        'columnDefs': [{\r\n            className:'action-width',\r\n            targets: [2]\r\n        }]\r\n    });\r\n\r\n    $.fn.dataTable.ext.errMode = () => alert(' @lang(\\'ck_admin.datatables.loading_error\\') ');\r\n\r\n});\r\n\r\n\r\n\r\n$(document).on('click', '.open-delete-modal', function() {\r\n    modal_update_action_button_text(\"Delete\");\r\n    modal_add_class_action_button_text('btn-danger');\r\n    modal_add_class_action_button_text('delete');\r\n    modal_update_title('Delete Client?');\r\n    modal_update_body(\"Are you sure you want to delete this client?\");\r\n    modal_update_data_id($(this).data('id'));\r\n    $('#confirm_modal').modal('show');\r\n});\r\n\r\n$(document).on('click', '.open-suspend-modal', function() {\r\n    modal_reset_class_action_button();\r\n    modal_update_action_button_text(\"Suspend\");\r\n    modal_add_class_action_button_text('btn-danger');\r\n    modal_add_class_action_button_text('suspend');\r\n    modal_update_title('Suspend this client?');\r\n    modal_update_body(\"Are you sure you want to suspend this client?\");\r\n    modal_update_data_id($(this).data('id'));\r\n    $('#confirm_modal').modal('show');\r\n});\r\n\r\n$(document).on('click', '.open-unsuspend-modal', function() {\r\n    modal_reset_class_action_button();\r\n    modal_update_action_button_text(\"Unsuspend\");\r\n    modal_add_class_action_button_text('btn-danger');\r\n    modal_add_class_action_button_text('unsuspend');\r\n    modal_update_title('Unsuspend this client?');\r\n    modal_update_body(\"Are you sure you want to unsuspend this client?\");\r\n    modal_update_data_id($(this).data('id'));\r\n    $('#confirm_modal').modal('show');\r\n});\r\n\r\n\r\n$.ajaxSetup({\r\n    headers: {\r\n        'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n});\r\n\r\n$('.modal-footer').on('click', '.delete', function() {\r\n\r\n    modal_update_processing_message(\"Processing...\");\r\n    modal_disable_action_button();\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: 'clients/'+$('#data_id').text(),\r\n        data: {\r\n            '_method' : 'DELETE',\r\n        },\r\n        dataType: 'json',\r\n        success: function(data) {\r\n\r\n            modal_update_result_message(data.message);\r\n\r\n            if (data.result)\r\n            {\r\n                $('#client_table').DataTable().draw(false);\r\n            }\r\n        },\r\n        error: function(data) {\r\n            modal_update_result_message(\"An error occured. Please try again later\");\r\n        },\r\n        complete: function(data) {\r\n\r\n            modal_close()\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n$('.modal-footer').on('click', '.suspend', function() {\r\n\r\n    modal_update_processing_message(\"Processing...\");\r\n    modal_disable_action_button();\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: 'clients/'+$('#data_id').text()+'/suspend',\r\n        data: {\r\n            '_method' : 'PATCH',\r\n        },\r\n        dataType: 'json',\r\n        success: function(data) {\r\n\r\n            modal_update_result_message(data.message);\r\n\r\n            $('#suspend_'+$('#data_id').text()).text('Unsuspend');\r\n            $('#suspend_'+$('#data_id').text()).addClass('open-unsuspend-modal');\r\n            modal_remove_class_action_button_text('suspend');\r\n\r\n            if (data.result)\r\n            {\r\n                $('#client_table').DataTable().draw(false);\r\n\r\n            }\r\n        },\r\n        error: function(data) {\r\n            modal_update_result_message(\"An error occured. Please try again later\");\r\n        },\r\n        complete: function(data) {\r\n\r\n            modal_close()\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\n$('.modal-footer').on('click', '.unsuspend', function() {\r\n\r\n    modal_update_processing_message(\"Processing...\");\r\n    modal_disable_action_button();\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: 'clients/'+$('#data_id').text()+'/unsuspend',\r\n        data: {\r\n            '_method' : 'PATCH',\r\n        },\r\n        dataType: 'json',\r\n        success: function(data) {\r\n\r\n            modal_update_result_message(data.message);\r\n\r\n            $('#suspend_'+$('#data_id').text()).text('Suspend');\r\n            $('#suspend_'+$('#data_id').text()).addClass('open-suspend-modal');\r\n            modal_remove_class_action_button_text('unsuspend');\r\n\r\n            if (data.result)\r\n            {\r\n                $('#client_table').DataTable().draw(false);\r\n\r\n            }\r\n        },\r\n        error: function(data) {\r\n            modal_update_result_message(\"An error occured. Please try again later\");\r\n        },\r\n        complete: function(data) {\r\n\r\n            modal_close()\r\n\r\n        }\r\n\r\n    });\r\n\r\n});\r\n"],"sourceRoot":""}